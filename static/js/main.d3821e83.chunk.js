(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{172:function(e,t,a){e.exports=a(294)},177:function(e,t,a){},179:function(e,t,a){},294:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),o=a(91),i=a.n(o),c=(a(177),a(22)),s=a(23),u=a(26),p=a(24),l=a(27),h=(a(179),a(31)),d=a(100),m=a(136),f=a.n(m),E=a(25),w={CHANGE_VIEWPORT:"CHANGE_VIEWPORT",CHANGE_SELECTED_DATE:"CHANGE_SELECTED_DATE",UPDATE_WEATHER_DATA:"UPDATE_WEATHER_DATA",FETCH_WEATHER_DATA:"FETCH_WEATHER_DATA"},b=a(170),v=a.n(b),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={buttons:[],opened:!1},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"openMenu",value:function(){var e=this;this.setState({buttons:[r.a.createElement("button",{key:"1",className:"buttonMain","data-day":"0","data-word":"today",onClick:function(t){return e.setDate(t)}}," Today "),r.a.createElement("button",{key:"2",className:"buttonMain","data-day":"1","data-word":"tomorrow",onClick:function(t){return e.setDate(t)}}," Tomorrow "),r.a.createElement("button",{key:"3",className:"buttonMain","data-day":"2","data-word":"the day after tomorrow",onClick:function(t){return e.setDate(t)}}," The day after tomorrow ")],opened:!0})}},{key:"setDate",value:function(e){this.props.changeSelectedDate(e.target.dataset.day,e.target.dataset.word),this.closeMenu()}},{key:"closeMenu",value:function(){this.setState({buttons:[],opened:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"daySelector",style:{position:"absolute",left:10,top:190}},r.a.createElement("button",{className:"buttonMain",onClick:this.state.opened?this.closeMenu.bind(this):this.openMenu.bind(this)}," Choose date "),r.a.createElement(v.a,{transitionName:"anim",transitionAppear:!1,transitionEnterTimeout:500,transitionEnter:!0,transitionLeaveTimeout:500,transitionLeave:!0},this.state.buttons))}}]),t}(n.Component),A=Object(E.b)(function(e){return{}},function(e){return{changeSelectedDate:function(t,a){return e(function(e,t){return{type:w.CHANGE_SELECTED_DATE,selectedDayForWeather:e,selectedWordForWeather:t}}(t,a))}}})(D),T=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=void 0;if(0!==this.props.temperature.length)switch(+this.props.dayForWeather){case 1:e=this.props.temperature[8].main.temp;break;case 2:e=this.props.temperature[16].main.temp;break;default:e=this.props.temperature[0].main.temp}return r.a.createElement("div",{className:"temperatureDiv",style:{position:"absolute",left:10,top:110}},r.a.createElement("label",null,"Temperature for "+this.props.wordForWeather),r.a.createElement("label",null,"in "+this.props.place),r.a.createElement("label",null,"is "+e+" degrees Celsius"))}}]),t}(n.Component),y=Object(E.b)(function(e){return{wordForWeather:e.selectedWordForWeather,dayForWeather:e.selectedDayForWeather,place:e.weatherData.city.name,temperature:e.weatherData.list}},function(e){return{}})(T),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).onViewportChange=function(e){console.log(a.props.viewport.zoom,e.zoom),a.props.changeViewport(Object(h.a)({},a.props.viewport,e)),a.setState({lastTime:Date.now()})},a.mapDiv=r.a.createRef(),a.mapRef=r.a.createRef(),a.state={lastTime:Date.now()},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setProperSize(),window.addEventListener("resize",this.setProperSize.bind(this)),this.getLocation(),this.props.fetchWeatherData()}},{key:"componentDidUpdate",value:function(e){this.props.viewport.latitude===e.viewport.latitude&&this.props.viewport.longitude===e.viewport.longitude||setTimeout(function(){this.state.lastTime+199<Date.now()&&this.props.fetchWeatherData()}.bind(this),200)}},{key:"getLocation",value:function(){var e=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){return e.props.changeViewport(Object(h.a)({},e.props.viewport,{latitude:t.coords.latitude,longitude:t.coords.longitude}))}),this.props.fetchWeatherData()}},{key:"setProperSize",value:function(){this.props.changeViewport(Object(h.a)({},this.props.viewport,{width:this.mapDiv.current.offsetWidth,height:this.mapDiv.current.offsetHeight}))}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.mapDiv,className:"mapDiv"},r.a.createElement(d.b,Object.assign({ref:this.mapRef,mapboxApiAccessToken:"pk.eyJ1IjoiZWFrdGhlY2F0IiwiYSI6ImNqbmFzZXd6MjAweGEza3A4cnZrNHZraXQifQ.cIbSGmYxwZOc2sNnxZ0hsQ"},this.props.viewport,{onViewportChange:this.onViewportChange}),r.a.createElement("div",{style:{position:"absolute",left:10,top:10}},r.a.createElement(d.a,{onViewportChange:this.onViewportChange})),r.a.createElement(y,null),r.a.createElement(A,null),r.a.createElement("div",null,r.a.createElement(f.a,{mapRef:this.mapRef,onViewportChange:this.onViewportChange,mapboxApiAccessToken:"pk.eyJ1IjoiZWFrdGhlY2F0IiwiYSI6ImNqbmFzZXd6MjAweGEza3A4cnZrNHZraXQifQ.cIbSGmYxwZOc2sNnxZ0hsQ"}))))}}]),t}(n.Component),O=Object(E.b)(function(e){return{viewport:e.viewport}},function(e){return{changeViewport:function(t){return e(function(e){return{type:w.CHANGE_VIEWPORT,viewport:e}}(t))},fetchWeatherData:function(){return e({type:w.FETCH_WEATHER_DATA})}}})(j),g=a(50),W=a(171);var C=a(51),k=a.n(C),_=a(28);function F(e,t){return fetch("https://api.openweathermap.org/data/2.5/".concat("forecast","?lat=").concat(e,"&lon=").concat(t,"&APPID=").concat("c3c29158ae79eb1c9b2ad2c30aabafd1","&units=").concat("metric"),{method:"GET",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",accept:"application/json"},mode:"cors"}).then(function(e){return e.json()})}var H=k.a.mark(R),N=k.a.mark(x);function R(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.d)(w.FETCH_WEATHER_DATA,x);case 2:case"end":return e.stop()}},H,this)}function x(){var e,t,a;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(_.c)(function(e){return e.viewport.latitude});case 3:return e=n.sent,n.next=6,Object(_.c)(function(e){return e.viewport.longitude});case 6:return t=n.sent,n.next=9,Object(_.a)(F,e,t);case 9:return a=n.sent,n.next=12,Object(_.b)({type:w.UPDATE_WEATHER_DATA,weatherData:a});case 12:n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(0),n.next=18,console.log("Error on getting weather data",n.t0);case 18:case"end":return n.stop()}},N,this,[[0,14]])}var S=Object(W.a)(),I=Object(g.c)(function(e,t){switch(t.type){case w.CHANGE_VIEWPORT:return Object(h.a)({},e,{viewport:t.viewport});case w.CHANGE_SELECTED_DATE:return Object(h.a)({},e,{selectedDayForWeather:t.selectedDayForWeather,selectedWordForWeather:t.selectedWordForWeather});case w.UPDATE_WEATHER_DATA:return Object(h.a)({},e,{weatherData:t.weatherData});default:return e||{viewport:{width:500,height:500,latitude:37.7577,longitude:-122.4376,zoom:9.5},weatherData:{city:{name:void 0},list:[]},selectedDayForWeather:0,selectedWordForWeather:"today"}}},Object(g.a)(S));S.run(R);var G=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{store:I},r.a.createElement("div",{className:"App"},r.a.createElement(O,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[172,2,1]]]);
//# sourceMappingURL=main.d3821e83.chunk.js.map